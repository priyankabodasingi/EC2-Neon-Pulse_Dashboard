FROM python:3.12-slim AS build
ADD . /pythonapp
WORKDIR /pythonapp
RUN pip install --prefix=/devops -r requirements.txt

FROM python:3.12-alpine AS runtime
LABEL author=devopsteam
LABEL project=python
COPY --from=build /pythonapp /dummypython
COPY --from=build /pythonapp/devops /usr/share
WORKDIR /dummypython
EXPOSE 5001
CMD ["python","app.py"]